#!/bin/bash
set -e

case "$1" in
    remove|upgrade|deconfigure)
        # Stop services gracefully
        systemctl stop genesis-agent-collector.service 2>/dev/null || true
        systemctl stop genesis-agent-bridge.service 2>/dev/null || true
        systemctl stop genesis-agent-nats.service 2>/dev/null || true
        
        # Disable services
        systemctl disable genesis-agent-collector.service 2>/dev/null || true
        systemctl disable genesis-agent-bridge.service 2>/dev/null || true
        systemctl disable genesis-agent-nats.service 2>/dev/null || true
        ;;
esac

exit 0
